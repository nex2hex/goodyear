(function(a){jQuery.fn.goodyear=function(e){e=a.extend({format:"D MMM YYYY г."},e);var g={single_date_item_width:25,single_date_item_height:21,year_block_height:269,year_selection_top:119,year_selection_border_top:1,single_year_item_height:32,month_block_height:240,month_slider_height:43,month_slider_top_manual_correction:1,single_month_item_height:20,date_block_height:267,date_block_month_block_padding_top:5,date_block_month_block_padding_bottom:5,date_block_label_height:21,date_block_label_border_bottom:1,range_from_text_block_to_picker:3,picker_open:null};var f={container:function(){return"<div class='goodyear-container'><div class='goodyear-icon'></div><div class='goodyear-picker'><div class='goodyear-date-picker'><div class='goodyear-slider'>"+f.days()+"</div></div><div class='goodyear-month-picker'><div class='goodyear-months'>"+f.months()+"</div><div class='goodyear-slider'><div class='goodyear-months'>"+f.months()+"</div></div></div><div class='goodyear-date-picker-label'><div class='goodyear-date-picker-label-background'></div><span class='goodyear-monday'>"+b.days_of_week[0]+"</span><span class='goodyear-tuesday'>"+b.days_of_week[1]+"</span><span class='goodyear-wednesday'>"+b.days_of_week[2]+"</span><span class='goodyear-thursday'>"+b.days_of_week[3]+"</span><span class='goodyear-friday'>"+b.days_of_week[4]+"</span><span class='goodyear-saturday'>"+b.days_of_week[5]+"</span><span class='goodyear-sunday'>"+b.days_of_week[6]+"</span></div><div class='goodyear-year-picker'><div class='goodyear-years'><div class='goodyear-years-floating-block'>"+f.years()+"</div></div><div class='goodyear-current-year-selection'><div class='goodyear-years-floating-block'>"+f.years()+"</div></div></div></div></div>"},years:function(j,m){var l="";for(i=e.min_year;i<=e.max_year;i++){l+="<div class='goodyear-year"+(d.today.format("YYYY")==i?" today":"")+"'><span>"+i+(d.today.format("YYYY")==i?" &bull;":"")+"</span></div>"}return l},months:function(){var j="";for(month_num=0;month_num<12;month_num++){j+="<div class='goodyear-month"+(d.today.format("M")==(month_num+1)?" today":"")+"'>"+b.months_ru_short[month_num]+(d.today.format("M")==(month_num+1)?"<span class='bull'> &bull;</span>":"")+"</div>"}return j},days:function(){var t="";for(month_num=0;month_num<12;month_num++){var r=moment(d.selected_date.format("YYYY")+"-"+(month_num+1)+"-01","YYYY-M-DD");var n=r.format("e");var q=r.add("months",1).subtract("days",1).format("D");var m=(n>2?9:2)-n;var u=(9-m)*g.single_date_item_width;var s=(4-m)*g.single_date_item_width;var l=(2-m)*g.single_date_item_width;var o=(0-m)*g.single_date_item_width;var p=(0-m)*g.single_date_item_width;var j=(0-m)*g.single_date_item_width;t+="<div class='goodyear-month goodyear-"+b.months_en[month_num]+"' data-month-id='"+month_num+"'><div class='goodyear-label'>"+b.months_ru[month_num].substr(0,1).toUpperCase()+b.months_ru[month_num].substr(1)+"</div><div class='goodyear-line_1'><div class='goodyear-weekdays'><div class='goodyear-slide_line' style='left:"+u+"px;'><span date='1'>1</span><span date='2'>2</span></div></div><div class='goodyear-weekend'><div class='goodyear-slide_line' style='left:"+s+"px;'><span date='1'>1</span><span date='2'>2</span><span date='3'>3</span><span date='4'>4</span></div></div></div><div class='goodyear-line_2'><div class='goodyear-weekdays'><div class='goodyear-slide_line' style='left:"+l+"px;'><span date='1'>1</span><span date='2'>2</span><span date='3'>3</span><span date='4'>4</span><span date='5'>5</span><span date='6'>6</span><span date='7'>7</span><span date='8'>8</span><span date='9'>9</span></div></div><div class='goodyear-weekend'><div class='goodyear-slide_line' style='left:"+o+"px;'><span date='4'>4</span><span date='5'>5</span><span date='6'>6</span><span date='7'>7</span><span date='8'>8</span><span date='9'>9</span><span date='10'>10</span><span date='11'>11</span></div></div></div><div class='goodyear-line_3'><div class='goodyear-weekdays'><div class='goodyear-slide_line' style='left:"+p+"px;'><span date='6'>6</span><span date='7'>7</span><span date='8'>8</span><span date='9'>9</span><span date='10'>10</span><span date='11'>11</span><span date='12'>12</span><span date='13'>13</span><span date='14'>14</span><span date='15'>15</span><span date='16'>16</span></div></div><div class='goodyear-weekend'><div class='goodyear-slide_line' style='left:"+j+"px;'><span date='11'>11</span><span date='12'>12</span><span date='13'>13</span><span date='14'>14</span><span date='15'>15</span><span date='16'>16</span><span date='17'>17</span><span date='18'>18</span></div></div></div><div class='goodyear-line_4'><div class='goodyear-weekdays'><div class='goodyear-slide_line' style='left:"+p+"px;'><span date='13'>13</span><span date='14'>14</span><span date='15'>15</span><span date='16'>16</span><span date='17'>17</span><span date='18'>18</span><span date='19'>19</span><span date='20'>20</span><span date='21'>21</span><span date='22'>22</span><span date='23'>23</span></div></div><div class='goodyear-weekend'><div class='goodyear-slide_line' style='left:"+j+"px;'><span date='18'>18</span><span date='19'>19</span><span date='20'>20</span><span date='21'>21</span><span date='22'>22</span><span date='23'>23</span><span date='24'>24</span><span date='25'>25</span></div></div></div><div class='goodyear-line_5'><div class='goodyear-weekdays'><div class='goodyear-slide_line' style='left:"+p+"px;'><span date='20'>20</span><span date='21'>21</span><span date='22'>22</span><span date='23'>23</span><span date='24'>24</span><span date='25'>25</span><span date='26'>26</span><span date='27'>27</span><span date='28'>28</span><span date='29' "+(q<29?"style='display:none'":"")+">29</span><span date='30' "+(q<30?"style='display:none'":"")+">30</span></div></div><div class='goodyear-weekend'><div class='goodyear-slide_line' style='left:"+j+"px;'><span date='25'>25</span><span date='26'>26</span><span date='27'>27</span><span date='28'>28</span><span date='29' "+(q<29?"style='display:none'":"")+">29</span><span date='30' "+(q<30?"style='display:none'":"")+">30</span><span date='d31' "+(q<31?"style='display:none'":"")+">31</span></div></div></div><div class='goodyear-line_6'><div class='goodyear-weekdays'><div class='goodyear-slide_line' style='left:"+p+"px;'><span date='27'>27</span><span date='28'>28</span><span date='29' "+(q<29?"style='display:none'":"")+">29</span><span date='30' "+(q<30?"style='display:none'":"")+">30</span><span date='31' "+(q<31?"style='display:none'":"")+">31</span></div></div></div></div>"}return t}};var b={months_en:["january","febrary","march","april","may","june","july","august","september","october","november","december"],months_ru:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],months_ru_short:["янв","фев","мар","апр","май","июнь","июль","авг","сен","окт","ноя","дек"],months_ru_genitive:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],days_of_week:["П","В","С","Ч","П","С","В"],common_date_formats:[["D M","DD M","DD MM","D-M","DD-M","DD-MM","D.M","DD.M","DD.MM","D\\M","DD\\M","DD\\MM","D/M","DD/M","DD/MM","D M YY","DD M YY","DD MM YY","D M YYYY","DD M YYYY","DD MM YYYY","D-M-YY","DD-M-YY","DD-MM-YY","D-M-YYYY","DD-M-YYYY","DD-MM-YYYY","D.M.YY","DD.M.YY","DD.MM.YY","D.M.YYYY","DD.M.YYYY","DD.MM.YYYY","D\\M\\YY","DD\\M\\YY","DD\\MM\\YY","D\\M\\YYYY","DD\\M\\YYYY","DD\\MM\\YYYY","D/M/YY","DD/M/YY","DD/MM/YY","D/M/YYYY","DD/M/YYYY","DD/MM/YYYY","D M YY","DD M YY","DD MM YY","D M YYYY","DD M YYYY","DD MM YYYY","D-M-YY","DD-M-YY","DD-MM-YY","D-M-YYYY","DD-M-YYYY","DD-MM-YYYY","D.M.YY","DD.M.YY","DD.MM.YY","D.M.YYYY","DD.M.YYYY","DD.MM.YYYY","D\\M\\YY","DD\\M\\YY","DD\\MM\\YY","D\\M\\YYYY","DD\\M\\YYYY","DD\\MM\\YYYY","D/M/YY","DD/M/YY","DD/MM/YY","D/M/YYYY","DD/M/YYYY","DD/MM/YYYY","YY M D","YY M DD","YY MM DD","YYYY M D","YYYY M DD","YYYY MM DD","YY-M-D","YY-M-DD","YY-MM-DD","YYYY-M-D","YYYY-M-DD","YYYY-MM-DD","YY.M.D","YY.M.DD","YY.MM.DD","YYYY.M.D","YYYY.M.DD","YYYY.MM.DD","YY\\M\\D","YY\\M\\DD","YY\\MM\\DD","YYYY\\M\\D","YYYY\\M\\DD","YYYY\\MM\\DD","YY/M/D","YY/M/DD","YY/MM/DD","YYYY/M/D","YYYY/M/DD","YYYY/MM/DD","YY D M","YY DD M","YY DD MM","YYYY D M","YYYY DD MM","YYYY DD MM","YY-D-M","YY-DD-M","YY-DD-MM","YYYY-D-M","YYYY-DD-MM","YYYY-DD-MM","YY.D.M","YY.DD.M","YY.DD.MM","YYYY.D.M","YYYY.DD.MM","YYYY.DD.MM","YY\\D\\M","YY\\DD\\M","YY\\DD\\MM","YYYY\\D\\M","YYYY\\DD\\MM","YYYY\\DD\\MM","YY/D/M","YY/DD/M","YY/DD/MM","YYYY/D/M","YYYY/DD/MM","YYYY/DD/MM","D MMM","DD MMM"],["YYYY MMM D","YYYY MMM DD","YYYY D MMM","YYYY DD MMM","D MMM YY","DD MMM YY","D MMM YYYY","DD MMM YYYY","D MMM YY","DD MMM YY","D MMM YYYY","DD MMM YYYY","MMM D YYYY","MMM DD YYYY","YY MMM D","YY MMM DD","YY D MMM","YY DD MMM","D MMM","DD MMM"],["YYYY MMM D","YYYY MMM DD","YYYY D MMM","YYYY DD MMM","D MMM YY","DD MMM YY","D MMM YYYY","DD MMM YYYY","D MMM YY","DD MMM YY","D MMM YYYY","DD MMM YYYY","MMM D YYYY","MMM DD YYYY","YY MMM D","YY MMM DD","YY D MMM","YY DD MMM"]],common_date_langs:["ru","en"]};var d={input_text_value:null,selected_date:null,today:null,displayed_year:null,container:null,drag_item:null,drag_start_pos_y:null,drag_start_element_top:null,drag_started:null,is_mobile:null,input_text_error:null,mousewheel:null};var c={wrap_element:function(m){var j=a(f.container()).clone();j.css("width",parseInt(m.css("width"),10)+parseInt(m.css("paddingLeft"),10)+parseInt(m.css("paddingRight"),10)+parseInt(m.css("borderLeftWidth"),10)+parseInt(m.css("borderRightWidth"),10));m.replaceWith(j);m.addClass("goodyear-text").val(d.input_text_value).prependTo(j);d.container=j;if(d.input_text_value==d.selected_date.format(e.format)){d.container.removeClass("goodyear-error");d.input_text_error=false}else{if(d.input_text_value){d.container.addClass("goodyear-error");d.input_text_error=true}}var l=new RegExp("mobile|android","i");d.is_mobile=l.test(navigator.userAgent);c.set_date();c.input_icon_hover();if(!d.is_mobile){c.show_and_hide_picker()}c.set_date_on_blur();c.months_hover();c.months_click();c.months_drag();c.months_mousewheel();c.year_mouseenter();c.year_click();c.year_drag();c.year_mousewheel();c.date_hover();c.date_pick(j)},document_actions:function(){a("html").mouseup(function(){if(!d.drag_item){a(".goodyear-picker").css("zIndex",1);a(".goodyear-picker").fadeOut(100);d.picker_open=false}})},input_icon_hover:function(){d.container.find(".goodyear-icon").mouseenter(function(){a(this).addClass("hover")}).mouseleave(function(){a(this).removeClass("hover")}).click(function(){d.container.find(".goodyear-text").trigger("focus")})},set_date:function(){var o=d.container.find(".goodyear-year-picker");var q=parseInt(d.selected_date.format("YYYY"),10)-e.min_year;var p=-(q*g.single_year_item_height)+g.year_selection_top+g.year_selection_border_top;o.find(".goodyear-years").find(".goodyear-years-floating-block").stop(true,true);o.find(".goodyear-years").find(".goodyear-years-floating-block").animate({top:p+"px"},{duration:(d.displayed_year?(Math.abs(parseInt(d.selected_date.format("YYYY"),10)-d.displayed_year)*200<1000?Math.abs(parseInt(d.selected_date.format("YYYY"),10)-d.displayed_year)*200:1000):0),step:function(u,v){o.find(".goodyear-years").find(".goodyear-years-floating-block").data("top",u);o.find(".goodyear-current-year-selection").find(".goodyear-years-floating-block").css("top",u-(g.year_selection_top+g.year_selection_border_top)+"px")}});prev_displayed_year=d.displayed_year;d.displayed_year=parseInt(d.selected_date.format("YYYY"),10);if(d.displayed_year!=prev_displayed_year){c.year_change_date_block_reaction()}var s=d.container.find(".goodyear-month-picker").find(".goodyear-slider");var l=-Math.floor((g.month_slider_height-g.single_month_item_height)/2);var m=(parseInt(d.selected_date.format("M"),10)-1)*g.single_month_item_height+l+g.month_slider_top_manual_correction;if(m<0){m=0}if(m>(g.month_block_height-g.month_slider_height)){m=(g.month_block_height-g.month_slider_height)}var n=d.container.find(".goodyear-date-picker").find(".goodyear-slider");var r=(g.date_block_height-g.date_block_label_height-g.date_block_label_border_bottom);var t=12*(6*g.date_block_label_height+(g.date_block_month_block_padding_top>g.date_block_month_block_padding_bottom?g.date_block_month_block_padding_top:g.date_block_month_block_padding_bottom))+g.date_block_month_block_padding_bottom;var j=t-r;s.stop(true,true);s.animate({top:m+"px"},{duration:3*Math.abs(parseInt(s.css("top"),10)-m),step:function(u,w){s.find(".goodyear-months").css("top",(-u)+"px");var v=g.date_block_label_height+g.date_block_label_border_bottom-j*(u/(g.month_block_height-g.month_slider_height));n.css("top",v+"px");n.data("top",v);s.data("top",u)}});n.find(".goodyear-month").filter(".goodyear-"+b.months_en[d.today.format("M")-1]).find("span").filter("[date='"+d.today.format("D")+"']").addClass("today").append("<div class='bull'>&bull;</div>");n.find(".goodyear-month").find(".goodyear-slide_line").find("span").filter(".active").addClass("prev_active");n.find(".goodyear-month").find("span").filter(".active").removeClass("active");n.find(".goodyear-month").filter(".goodyear-"+b.months_en[d.selected_date.format("M")-1]).find("span").filter("[date='"+d.selected_date.format("D")+"']").addClass("hover").addClass("active").removeClass("hover")},year_change_date_block_reaction:function(){var j=d.container.find(".goodyear-date-picker").find(".goodyear-slider");var l=d.container.find(".goodyear-month-picker").find(".goodyear-slider");if(d.selected_date.format("YYYY")!=d.displayed_year){j.find(".goodyear-month").find(".goodyear-slide_line").find("span").removeClass("active")}else{j.find(".goodyear-month").filter(".goodyear-"+b.months_en[parseInt(d.selected_date.format("M"),10)-1]).find("span").filter("[date='"+d.selected_date.format("D")+"']").addClass("active")}if(d.today.format("YYYY")!=d.displayed_year){j.find(".goodyear-month").find(".goodyear-slide_line").find("span").removeClass("today");d.container.find(".goodyear-month-picker").find(".goodyear-month").removeClass("today")}else{j.find(".goodyear-month").filter(".goodyear-"+b.months_en[parseInt(d.today.format("M"),10)-1]).find("span").filter("[date='"+d.today.format("D")+"']").addClass("today");d.container.find(".goodyear-months").each(function(){a(this).find(".goodyear-month").eq(parseInt(d.today.format("M"),10)-1).addClass("today")})}d.container.find(".goodyear-date-picker").find(".goodyear-month").each(function(){var p=d.container.find(".goodyear-date-picker").find(".goodyear-month").index(a(this));var n=moment(d.displayed_year+"-"+(p+1)+"-01","YYYY-M-DD");var m=n.format("e");var r=n.add("months",1).subtract("days",1).format("D");var q=(m>2?9:2)-m;var o=(9-q)*g.single_date_item_width;d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_1").find(".goodyear-weekdays").find(".goodyear-slide_line").stop(true,true);d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_1").find(".goodyear-weekdays").find(".goodyear-slide_line").animate({left:o},{duration:1000,step:function(u,x){var y=9-(u/g.single_date_item_width);var t=(4-y)*g.single_date_item_width;d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_1").find(".goodyear-weekend").find(".goodyear-slide_line").css({left:t});var v=(2-y)*g.single_date_item_width;d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_2").find(".goodyear-weekdays").find(".goodyear-slide_line").css({left:v});var s=(0-y)*g.single_date_item_width;d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_2").find(".goodyear-weekend").find(".goodyear-slide_line").css({left:s});var w=(0-y)*g.single_date_item_width;d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_3,.goodyear-line_4,.goodyear-line_5,.goodyear-line_6").find(".goodyear-weekdays").find(".goodyear-slide_line").css({left:w});var z=(0-y)*g.single_date_item_width;d.container.find(".goodyear-date-picker").find(".goodyear-month").eq(p).find(".goodyear-line_3,.goodyear-line_4,.goodyear-line_5,.goodyear-line_6").find(".goodyear-weekend").find(".goodyear-slide_line").css({left:z})}});for(day=29;day<=31;day++){if(day<=r){j.find(".goodyear-month").filter(".goodyear-"+b.months_en[p]).find(".goodyear-slide_line").find("[date='"+day+"']").css("display","inline")}else{j.find(".goodyear-month").filter(".goodyear-"+b.months_en[p]).find(".goodyear-slide_line").find("[date='"+day+"']").css("display","none")}}})},show_and_hide_picker:function(){d.container.find(".goodyear-text").focus(function(){if(a("html").width()-d.container.offset().left-d.container.width()<d.container.find(".goodyear-picker").width()){d.container.find(".goodyear-picker").addClass("position-right")}else{d.container.find(".goodyear-picker").removeClass("position-right")}a(".goodyear-picker").not(d.container.find(".goodyear-picker")).parent().css("zIndex",1);a(".goodyear-picker").not(d.container.find(".goodyear-picker")).fadeOut(100);d.container.css("zIndex",2);d.container.find(".goodyear-picker").css("top",(d.container.find(".goodyear-text").height()+parseInt(d.container.find(".goodyear-text").css("borderTopWidth"),10)+parseInt(d.container.find(".goodyear-text").css("borderBottomWidth"),10)+parseInt(d.container.find(".goodyear-text").css("paddingTop"),10)+parseInt(d.container.find(".goodyear-text").css("paddingBottom"),10)+g.range_from_text_block_to_picker));d.container.find(".goodyear-picker").css("display","block");d.picker_open=true;if(!d.is_mobile){setTimeout(function(){d.container.find(".goodyear-text")[0].select()},1)}}).click(function(){if(d.container.find(".goodyear-picker").css("display")!="block"){a(this).trigger("focus")}})},set_date_on_blur:function(){d.container.find(".goodyear-text").keydown(function(j){if(j.which==13){j.preventDefault();d.container.find(".goodyear-text").trigger("change");if(!d.is_mobile){setTimeout(function(){d.container.find(".goodyear-text")[0].select()},1)}}if(j.which==9){d.container.find(".goodyear-text").trigger("change");d.container.find(".goodyear-picker").css("zIndex",1);d.container.find(".goodyear-picker").fadeOut(100)}}).keyup(function(){d.input_text_value=a(this).val()});d.container.find(".goodyear-text").change(function(){var j=c.string_to_date(a(this).val());d.input_text_value=a(this).val();if(!j){d.container.addClass("goodyear-error");d.input_text_error=true}else{if(j&&(j.format("YYYY")>=e.min_year&&j.format("YYYY")<=e.max_year)){d.selected_date=j;d.input_text_value=d.selected_date.format(e.format);c.set_date();d.container.find(".goodyear-text").val(d.input_text_value);d.container.removeClass("goodyear-error");d.input_text_error=false}}})},months_hover:function(j){d.container.find(".goodyear-month-picker").children().filter(".goodyear-months").find(".goodyear-month").mouseenter(function(){a(this).addClass("hover")}).mouseleave(function(){a(this).removeClass("hover")})},months_drag:function(){var o=d.container.find(".goodyear-month-picker").find(".goodyear-slider");var m=d.container.find(".goodyear-date-picker").find(".goodyear-slider");o.stop(true,true);m.stop(true,true);var l=(g.date_block_height-g.date_block_label_height-g.date_block_label_border_bottom);var n=12*(6*g.date_block_label_height+(g.date_block_month_block_padding_top>g.date_block_month_block_padding_bottom?g.date_block_month_block_padding_top:g.date_block_month_block_padding_bottom))+g.date_block_month_block_padding_bottom;var j=n-l;o.mousedown(function(p){o.addClass("drag");d.drag_started=false;d.drag_item=o;d.drag_start_pos_y=p.pageY;d.drag_start_element_top=parseInt(o.css("top"),10);a("html, body").addClass("disable_selection");a("html").mousemove(function(r){d.drag_started=true;if(d.drag_item==o){var s=(d.drag_start_pos_y-r.pageY);var t=d.drag_start_element_top-s;if(t<0){t=0}if(t>(g.month_block_height-g.month_slider_height)){t=(g.month_block_height-g.month_slider_height)}date_slider_month_slider_top=t;d.drag_item.css("top",t);d.drag_item.data("top",t);o.find(".goodyear-months").css("top",(-t)+"px");var q=g.date_block_label_height+g.date_block_label_border_bottom-j*(date_slider_month_slider_top/(g.month_block_height-g.month_slider_height));m.css("top",q+"px");m.data("top",q)}})}).mouseenter(function(){a(this).addClass("hover")}).mouseleave(function(){a(this).removeClass("hover")});d.container.add(document).mouseup(function(p){p.stopPropagation();if(d.drag_item==o){d.drag_item=null;d.drag_start_pos_y=null;d.container.find(".goodyear-year-picker").removeClass("goodyear-drag_started");o.removeClass("drag");a("html").unbind("mousemove");a("html, body").removeClass("disable_selection");return false}})},months_mousewheel:function(){var l=(g.date_block_height-g.date_block_label_height-g.date_block_label_border_bottom);var o=12*(6*g.date_block_label_height+(g.date_block_month_block_padding_top>g.date_block_month_block_padding_bottom?g.date_block_month_block_padding_top:g.date_block_month_block_padding_bottom))+g.date_block_month_block_padding_bottom;var j=o-l;var n=d.container.find(".goodyear-month-picker").find(".goodyear-slider");var m=d.container.find(".goodyear-date-picker").find(".goodyear-slider");if(d.mousewheel){d.container.find(".goodyear-date-picker,.goodyear-month-picker,.goodyear-date-picker-label").mousewheel(function(q){if(navigator.platform.indexOf("Win")!=-1){q.delta*=20;q.deltaX*=20;q.deltaY*=20}var p=(m.data("top")?m.data("top"):parseFloat(m.css("top")))+q.deltaY;if(p>g.date_block_label_height){p=g.date_block_label_height}if(p<g.date_block_label_height-j){p=g.date_block_label_height-j}var r=(g.month_block_height-g.month_slider_height)*((g.date_block_label_height+g.date_block_label_border_bottom-p)/j);n.css("top",r);n.find(".goodyear-months").css("top",(-r)+"px");m.data("top",p);m.css("top",p+"px");return false})}},months_click:function(){var o=d.container.find(".goodyear-month-picker").find(".goodyear-slider");var m=d.container.find(".goodyear-date-picker").find(".goodyear-slider");var l=(g.date_block_height-g.date_block_label_height-g.date_block_label_border_bottom);var n=12*(6*g.date_block_label_height+(g.date_block_month_block_padding_top>g.date_block_month_block_padding_bottom?g.date_block_month_block_padding_top:g.date_block_month_block_padding_bottom))+g.date_block_month_block_padding_bottom;var j=n-l;d.container.find(".goodyear-month-picker").children().filter(".goodyear-months").find(".goodyear-month").click(function(){var q=d.container.find(".goodyear-month-picker").children().filter(".goodyear-months").find(".goodyear-month").index(a(this));var p=-Math.floor((g.month_slider_height-g.single_month_item_height)/2);var r=q*g.single_month_item_height+p+g.month_slider_top_manual_correction;if(r<0){r=0}if(r>(g.month_block_height-g.month_slider_height)){r=(g.month_block_height-g.month_slider_height)}o.stop(true,true);o.animate({top:r+"px"},{duration:3*Math.abs(parseInt(o.css("top"),10)-r),step:function(s,u){o.data("top",s);o.find(".goodyear-months").css("top",(-s)+"px");var t=g.date_block_label_height+g.date_block_label_border_bottom-j*(s/(g.month_block_height-g.month_slider_height));m.css("top",t+"px");m.data("top",t)}})})},year_mouseenter:function(j){d.container.find(".goodyear-year-picker").children().filter(".goodyear-years").find(".goodyear-year").find("span").unbind("mouseenter");d.container.find(".goodyear-year-picker").children().filter(".goodyear-years").find(".goodyear-year").find("span").mouseenter(function(){a(this).addClass("hover")}).mouseleave(function(){a(this).removeClass("hover")})},year_click:function(){var j=d.container.find(".goodyear-year-picker");d.container.find(".goodyear-year-picker").children().filter(".goodyear-years").find(".goodyear-year").find("span").unbind("click");d.container.find(".goodyear-year-picker").children().filter(".goodyear-years").find(".goodyear-year").find("span").click(function(){if(!d.drag_started){var m=d.displayed_year;d.displayed_year=parseInt(a(this).text(),10);var n=d.displayed_year-e.min_year;var l=-(n*g.single_year_item_height)+g.year_selection_top+g.year_selection_border_top;j.find(".goodyear-years").find(".goodyear-years-floating-block").stop(true,true);j.find(".goodyear-years").find(".goodyear-years-floating-block").animate({top:l+"px"},{duration:(m?((Math.abs(d.displayed_year-m)*200)<1000?(Math.abs(d.displayed_year-m)*200):100):0),step:function(o,p){j.find(".goodyear-years").find(".goodyear-years-floating-block").data("top",o);j.find(".goodyear-current-year-selection").find(".goodyear-years-floating-block").css("top",o-(g.year_selection_top+g.year_selection_border_top)+"px")}});c.year_change_date_block_reaction()}})},year_drag:function(){var j=d.container.find(".goodyear-year-picker");j.stop(true,true);j.mousedown(function(l){d.drag_started=false;j.removeClass("drag_started");d.drag_item=j;d.drag_start_pos_y=l.pageY;d.drag_start_element_top=parseInt(j.find(".goodyear-years-floating-block").css("top"),10);a("html, body").addClass("disable_selection");a("html").mousemove(function(n){if(d.drag_item==j){d.drag_started=true;j.addClass("goodyear-drag_started");var o=(d.drag_start_pos_y-n.pageY);var m=d.drag_start_element_top-o;var p=parseInt(d.selected_date.format("YYYY"),10)-e.min_year;var q=g.year_block_height-g.single_year_item_height*(e.max_year-e.min_year+1);if(m>(g.year_selection_top+g.year_selection_border_top)){m=(g.year_selection_top+g.year_selection_border_top)}if(m<-(g.year_block_height-g.year_selection_top-g.single_year_item_height-2*g.year_selection_border_top)+q){m=-(g.year_block_height-g.year_selection_top-g.single_year_item_height-2*g.year_selection_border_top)+q}j.find(".goodyear-years-floating-block").css("top",m);j.find(".goodyear-years-floating-block").data("top",m);j.find(".goodyear-current-year-selection").find(".goodyear-years-floating-block").css("top",m-(g.year_selection_top+g.year_selection_border_top)+"px")}})});d.container.add(document).mouseup(function(m){m.stopPropagation();if(d.drag_item==j){d.displayed_year=e.min_year+Math.round(Math.abs((parseInt(j.find(".goodyear-years-floating-block").css("top"),10)-g.year_selection_top+g.year_selection_border_top)/g.single_year_item_height));var n=d.displayed_year-e.min_year;var l=-(n*g.single_year_item_height)+g.year_selection_top+g.year_selection_border_top;j.find(".goodyear-years").find(".goodyear-years-floating-block").stop(true,true);j.find(".goodyear-years").find(".goodyear-years-floating-block").animate({top:l+"px"},{duration:200,step:function(o,p){j.find(".goodyear-years").find(".goodyear-years-floating-block").data("top",o);j.find(".goodyear-current-year-selection").find(".goodyear-years-floating-block").css("top",o-(g.year_selection_top+g.year_selection_border_top)+"px")}});c.year_change_date_block_reaction();d.drag_item=null;d.drag_start_pos_y=null;d.container.find(".goodyear-year-picker").removeClass("goodyear-drag_started");a("html").unbind("mousemove");a("html, body").removeClass("disable_selection");return false}})},year_mousewheel:function(){var p=d.container.find(".goodyear-year-picker");var j=0;var m=moment().valueOf();var o=g.year_block_height-g.single_year_item_height*(e.max_year-e.min_year+1);var l=false;var n=false;if(d.mousewheel){p.mousewheel(function(r){r.stopPropagation();r.preventDefault();if(navigator.platform.indexOf("Win")!=-1){r.delta*=20;r.deltaX*=20;r.deltaY*=20}var q=(p.find(".goodyear-years").find(".goodyear-years-floating-block").data("top")?p.find(".goodyear-years").find(".goodyear-years-floating-block").data("top"):parseFloat(p.find(".goodyear-years").find(".goodyear-years-floating-block").css("top"),10))+r.deltaY;if(q>(g.year_selection_top+g.year_selection_border_top)){q=(g.year_selection_top+g.year_selection_border_top)}if(q<-(g.year_block_height-g.year_selection_top-g.single_year_item_height-2*g.year_selection_border_top)+o){q=-(g.year_block_height-g.year_selection_top-g.single_year_item_height-2*g.year_selection_border_top)+o}p.find(".goodyear-years").find(".goodyear-years-floating-block").css("top",q);p.find(".goodyear-years").find(".goodyear-years-floating-block").data("top",q);p.find(".goodyear-current-year-selection").find(".goodyear-years-floating-block").css("top",q-(g.year_selection_top+g.year_selection_border_top)+"px");if(typeof(n)!="undefined"&&n!=false){clearTimeout(n)}n=setTimeout(function(){d.displayed_year=e.min_year+Math.round(Math.abs((parseInt(p.find(".goodyear-years-floating-block").css("top"),10)-g.year_selection_top+g.year_selection_border_top)/g.single_year_item_height));var t=d.displayed_year-e.min_year;var s=-(t*g.single_year_item_height)+g.year_selection_top+g.year_selection_border_top;p.find(".goodyear-years").find(".goodyear-years-floating-block").stop(true,true);p.find(".goodyear-years").find(".goodyear-years-floating-block").animate({top:s+"px"},{duration:200,step:function(u,v){p.find(".goodyear-years").find(".goodyear-years-floating-block").data("top",u);p.find(".goodyear-current-year-selection").find(".goodyear-years-floating-block").css("top",u-(g.year_selection_top+g.year_selection_border_top)+"px")}});c.year_change_date_block_reaction()},500)})}},date_hover:function(){var j=d.container.find(".goodyear-date-picker").find(".goodyear-slider");j.find(".goodyear-month").find(".goodyear-slide_line").find("span").mouseenter(function(){a(this).addClass("hover");d.container.find(".goodyear-text").val(moment(d.displayed_year+"-"+(parseInt(a(this).parents(".goodyear-month").data("monthId"),10)+1)+"-"+parseInt(a(this).text(),10),"YYYY-M-D").format(e.format));if(!d.is_mobile){setTimeout(function(){d.container.find(".goodyear-text")[0].select()},1)}}).mouseleave(function(){a(this).removeClass("hover");if(d.picker_open){d.container.find(".goodyear-text").val(d.input_text_value)}if(!d.is_mobile){setTimeout(function(){d.container.find(".goodyear-text")[0].select()},1)}})},date_pick:function(j){var l=d.container.find(".goodyear-date-picker").find(".goodyear-slider");l.find(".goodyear-month").find(".goodyear-slide_line").find("span").mousedown(function(){d.container.removeClass("goodyear-error")}).mouseleave(function(){if(d.input_text_error){d.container.addClass("goodyear-error")}}).click(function(){d.container.removeClass("goodyear-error");d.input_text_error=false;d.selected_date=moment(d.displayed_year+"-"+(parseInt(a(this).parents(".goodyear-month").data("monthId"),10)+1)+"-"+parseInt(a(this).text(),10),"YYYY-M-D");d.input_text_value=d.selected_date.format(e.format);d.container.find(".goodyear-text").val(d.input_text_value);c.set_date();d.container.find(".goodyear-text").focus();if(!d.is_mobile){setTimeout(function(){d.container.find(".goodyear-text")[0].select()},1)}d.container.find(".goodyear-picker").css("zIndex",1);d.container.find(".goodyear-picker").fadeOut(100);d.picker_open=false})},trim:function(j){if(j&&typeof(j)=="string"){return j.replace(/^\s+|\s+$/g,"")}else{return""}},string_to_date:function(l){for(k=0;k<b.common_date_formats.length;k++){for(i=0;i<b.common_date_langs.length;i++){var j=moment(c.trim(l),b.common_date_formats[k],b.common_date_langs[i],(k<2));if(j.isValid()){break}}if(j.isValid()){break}}if(j.isValid()){return j}else{return false}}};var h=function(){if(typeof(a(this).data("goodyearFormat"))!="undefined"){e.format=a(this).data("goodyearFormat")}if(typeof(a(this).data("goodyearMinYear"))!="undefined"){e.min_year=a(this).data("goodyearMinYear")}if(typeof(a(this).data("goodyearMaxYear"))!="undefined"){e.max_year=a(this).data("goodyearMaxYear")}if(typeof(a(this).data("goodyearMinDate"))!="undefined"){e.min_date=a(this).data("goodyearMinDate")}if(typeof(a(this).data("goodyearMaxDate"))!="undefined"){e.max_date=a(this).data("goodyearMaxDate")}moment.lang("ru");var j=c.string_to_date(a(this).val());d.today=moment();e.min_date=c.string_to_date(e.min_date);if(e.min_date){e.min_year=e.min_date.format("YYYY")}else{if(e.min_year){e.min_date=c.string_to_date(e.min_year+"-01-01")}else{if(j){e.min_year=parseInt(j.format("YYYY"),10)-50}else{e.min_year=parseInt(d.today.format("YYYY"),10)-50}e.min_date=c.string_to_date(e.min_year+"-01-01")}}e.max_date=c.string_to_date(e.max_date);if(e.max_date){e.max_year=e.max_date.format("YYYY")}else{if(e.max_year){e.max_date=c.string_to_date(e.max_year+"-01-01")}else{if(j){e.max_year=parseInt(j.format("YYYY"),10)+50}else{e.max_year=parseInt(d.today.format("YYYY"),10)+50}e.max_date=c.string_to_date(e.max_year+"-01-01").endOf("year")}}if(j&&(j>=e.min_date&&j<=e.max_date)){d.selected_date=j;d.input_text_value=d.selected_date.format(e.format)}else{if(d.today>=e.min_date&&d.today<=e.max_date){d.selected_date=d.today;d.input_text_value=a(this).val()}else{d.selected_date=e.min_date;d.input_text_value=a(this).val()}}if(jQuery().mousewheel){d.mousewheel=true}c.document_actions();c.wrap_element(a(this))};return this.each(h)}})(jQuery);$(document).ready(function(){var a=new RegExp("^.*?goodyear[^/]*?$","i");var c=new RegExp("^(.*?)[^/]*?$","i");var b=false;$("script").filter("[src*='goodyear']").each(function(){if(a.test($(this).attr("src"))){b=c.exec($(this).attr("src"))[1]}});if(b){if(typeof(moment)=="undefined"){$.ajax({url:b+"moment-with-langs.min.js",cache:true,async:false})}}if(b){if(!jQuery().mousewheel){$.ajax({url:b+"jquery-mousewheel-3.1.11.min.js",cache:true,async:false})}}$(".goodyear").each(function(){$(this).goodyear()})});